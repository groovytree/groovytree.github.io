I"ª/<h2 id="ë‚´ìš©">ë‚´ìš©</h2>
<p>codepipelineì„ êµ¬ì¶•í•˜ì—¬ repositoryì— codeë¥¼ í˜•ìƒê´€ë¦¬, ë¹Œë“œ ì‹œ ì•„í‹°íŒ©íŠ¸ë¥¼ S3ì— ì €ì¥í•œë‹¤.</p>

<h2 id="1-codecommit">1. CodeCommit</h2>
<ul>
  <li>ì†ŒìŠ¤ì½”ë“œë¥¼ ì´ìš©, codecommit ì— repositoryë¥¼ ìƒì„±í•œë‹¤.</li>
  <li>ì†ŒìŠ¤ì½”ë“œë¥¼ í˜•ìƒê´€ë¦¬í•˜ë˜ branch ì— push ê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ codecommit repository ë¡œ push ë˜ë„ë¡ ì—°ê²°í•œë‹¤.</li>
</ul>

<h2 id="2-codebuild">2. CodeBuild</h2>
<ul>
  <li>codebuild.json
    <ul>
      <li>ë¹Œë“œ í”„ë¡œì íŠ¸ì˜ ì†ì„±ì„ ì„¤ì •í•˜ëŠ” íŒŒì¼ì´ë‹¤. json íŒŒì¼ì„ ì´ìš©í•˜ì—¬ CLIë¡œ ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
</ul>

<details>
<summary>example code</summary>
<div>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;project-name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;description&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CODECOMMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;source-location&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gitCloneDepth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buildspec"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildspec.yml"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InsecureSsl"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reportBuildStatus"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gitSubmodulesConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"fetchSubmodules"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"artifacts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3-bucket-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;artifacts-path&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"namespaceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUILD_ID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;artifacts-name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"overrideArtifactName"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"packaging"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NONE"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;cache-type&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;cache-location&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"&lt;cache-mode&gt;"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LINUX_CONTAINER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws/codebuild/amazonlinux2-x86_64-standard:2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"computeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUILD_GENERAL1_SMALL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"imagePullCredentialsType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_ROLE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"privilegedMode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"serviceRole"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;service-role&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timeoutInMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="nl">"queuedTimeoutInMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"vpcConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"securityGroupIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;security-group-id&gt;"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"subnets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;subnet-id&gt;"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"vpcId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;vpc-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"badgeEnabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;badge-enabled&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logsConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cloudWatchLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;cloudwatch-logs-status&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"groupName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;group-name&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"streamName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;stream-name&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"s3Logs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;s3-logs-status&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;s3-logs-location&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"encryptionDisabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;s3-logs-encryption-disabled&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"concurrentBuildLimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </div>
</details>

<table>
  <thead>
    <tr>
      <th>key</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>artifacts/location</td>
      <td>ì•„í‹°íŒ©íŠ¸ë¥¼ ì €ì¥í•  S3 bucket name</td>
    </tr>
    <tr>
      <td>artifacts/namespaceType</td>
      <td>(N)BUILD_IDê°€ ì•„í‹°íŒ©íŠ¸ ì´ë¦„ ì•ì— ì§€ì •ëœë‹¤</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>buildspec.yml
    <ul>
      <li>codecommit repositoryì˜ ìµœìƒë‹¨ì— í•´ë‹¹ íŒŒì¼ì„ ì €ì¥í•˜ì—¬ push í•œë‹¤</li>
    </ul>
  </li>
</ul>

<details>
<summary>example code</summary>
<div>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">0.2</span>

<span class="na">phases</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">commands</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">echo Building ...</span> 
      <span class="pi">-</span> <span class="s">echo $CODEBUILD_SRC_DIR</span>
      <span class="pi">-</span> <span class="s">echo $CODEBUILD_BUILD_NUMBER</span>
<span class="na">artifacts</span><span class="pi">:</span>
  <span class="na">files</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">location</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">artifact-name</span>
  <span class="na">discard-paths</span><span class="pi">:</span> <span class="s">no | yes</span>
  <span class="na">base-directory</span><span class="pi">:</span> <span class="s">location</span>
  <span class="na">exclude-paths</span><span class="pi">:</span> <span class="s">excluded paths</span>
  <span class="na">enable-symlinks</span><span class="pi">:</span> <span class="s">no | yes</span>
  <span class="na">s3-prefix</span><span class="pi">:</span> <span class="s">prefix</span>
</code></pre></div>    </div>
  </div>
</details>

<table>
  <thead>
    <tr>
      <th>key</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>version</td>
      <td>AWS 0.2ë¥¼ ê¶Œì¥í•œë‹¤</td>
    </tr>
    <tr>
      <td>phases</td>
      <td>install, pre_build, build, post_build ë¡œ ë‚˜ë‰˜ê³  ì‚¬ìš©ë  ëª…ë ¹ì–´ë¥¼ ê¸°ì¬í•œë‹¤</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë“¤ë„ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆë‹¤</li>
</ul>

<h2 id="2-1-troubleshooting">2-1. Troubleshooting</h2>

<h3 id="error-code">Error code:</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Phase context status code: CLIENT_ERROR Message: no matching artifact paths found
</code></pre></div></div>

<h3 id="solution">Solution:</h3>

<p>searching â€¦</p>
:ET